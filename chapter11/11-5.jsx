(function(){    function convertHTML(){        // ファイル選択ダイアログでファイルが選択されているか        if (!fileObj){            alert("変換するテキストファイルを選択してください");            return;        }        // ファイル保存ダイアログで保存ファイルが指定されているか        if (!saveObj){            alert("保存するファイル名を指定してください");            return;        }        // ファイルが読み込めるかどうか調べる        var flag = fileObj.open("r");   // 読み込みモードで開く        if (!flag){            alert("ファイルが開けません");            return;        }        // 書き込めるかどうか調べる        flag = saveObj.open("w");        if (!flag){            alert("ファイルが書き込めません");        }        // HTML5のヘッダーを書き出す        saveObj.write("<!DOCTYPE html><html><head><title>");        saveObj.write(decodeURI(fileObj.name));        saveObj.writeln("</title></head><body>");        // ファイルの最後まで繰り返し処理する        while(!fileObj.eof){            var line = fileObj.readln();    // 1行読み込む            line = "<p>"+line + "<p>";   // HTMLの段落タグを付加            saveObj.writeln(line);  // 書き出す        }        saveObj.writeln("</body></html>");        alert("変換が終了しました");    }    // ==============================================    // GUI処理部分    // ==============================================    var winObj, fileObj, saveObj;   // ウィンドウ、ファイルオブジェクトの変数    // ウィンドウオブジェクトを生成する    winObj = new Window("window", "テキストからHTMLに変換", [ 0,0, 260, 100]);    // 固定テキストをウィンドウに追加    winObj.add("statictext", [10, 15, 50, 30], "変換元：");    winObj.add("statictext", [10, 45, 50, 60], "保存先：");    // 各種ボタンを表示する    var srcBtn = winObj.add("button", [60, 10, 240, 25], "ファイル選択...");    var saveBtn = winObj.add("button", [60, 40, 240, 55], "ファイル選択...");    var execBtn = winObj.add("button", [60, 70, 240, 85], "HTMLに変換");    // ファイル選択を行うボタンがクリックされた時の処理    srcBtn.onClick = function(){        fileObj = File.openDialog("テキストファイルを選択してください");    }    // ファイル保存を行うボタンがクリックされた時の処理    saveBtn.onClick = function(){        saveObj = File.saveDialog("保存先を指定してください");    }    // 変換実行ボタンがクリックされた時の処理    execBtn.onClick = function(){        convertHTML();    }    // ウィンドウを中央に移動する    winObj.center();    // ウィンドウを表示する    winObj.show();})();